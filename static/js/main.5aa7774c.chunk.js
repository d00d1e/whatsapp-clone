(this["webpackJsonpreact-whatsapp-firebase"]=this["webpackJsonpreact-whatsapp-firebase"]||[]).push([[0],{74:function(e,t,c){},79:function(e,t,c){},83:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},90:function(e,t,c){},92:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),n=c(28),i=c.n(n),r=c(4),o=Object(a.createContext)(),j=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(r.jsx)(o.Provider,{value:Object(a.useReducer)(t,c),children:s})},d=function(){return Object(a.useContext)(o)},l=c(46),b="SET_USER",h=function(e,t){switch(console.log(t),t.type){case b:return Object(l.a)(Object(l.a)({},e),{},{user:t.user});default:return e}},u=c(12),O=c(33),m=c(10),p=c(55),x=c(105),f=c(43),v=(c(72),c(73),f.a.initializeApp({apiKey:"AIzaSyAKRYRIuQs-l-aw0pfc-omBsae0FKSaaww",authDomain:"whatsapp-clone-a8043.firebaseapp.com",projectId:"whatsapp-clone-a8043",storageBucket:"whatsapp-clone-a8043.appspot.com",messagingSenderId:"852220070490",appId:"1:852220070490:web:3717fb47683ebe11e5e663",measurementId:"G-ZYPEMNSSSR"}).firestore()),_=f.a.auth(),g=new f.a.auth.GoogleAuthProvider,N=v;c(74);function S(){var e=d(),t=Object(u.a)(e,2);Object(p.a)(t[0]);var c=t[1];return Object(r.jsx)("div",{className:"login",children:Object(r.jsxs)("div",{className:"login__container",children:[Object(r.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:""}),Object(r.jsx)("div",{className:"login__text",children:Object(r.jsx)("h1",{children:"Sign In to WhatsApp"})}),Object(r.jsx)(x.a,{onClick:function(){_.signInWithPopup(g).then((function(e){c({type:b,user:e.user})})).catch((function(e){return console.log(e.message)}))},children:"Sign In With Google"})]})})}var w=c(110),y=c(106),C=c(107),I=c(108),E=c(57),k=c.n(E),R=c(58),A=c.n(R);c(79);function D(e){var t,c=e.id,s=e.name,n=e.addNewChat,i=Object(a.useState)(""),o=Object(u.a)(i,2),j=o[0],d=o[1],l=Object(a.useState)(""),b=Object(u.a)(l,2),h=b[0],m=b[1];Object(a.useEffect)((function(){d(Math.floor(5e3*Math.random()))}),[]),Object(a.useEffect)((function(){N.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return e.data()})))}))}),[c]);return n?Object(r.jsx)("div",{className:"sidebarChat",onClick:function(){var e=prompt("Enter a name for chatroom.");e&&N.collection("rooms").add({name:e})},children:Object(r.jsx)("h2",{children:"Add New Chat"})}):Object(r.jsx)(O.b,{to:"/rooms/".concat(c),children:Object(r.jsxs)("div",{className:"sidebarChat",children:[Object(r.jsx)(w.a,{src:"https://avatars.dicebear.com/api/identicon/".concat(j,".svg")}),Object(r.jsxs)("div",{className:"sidebarChat__info",children:[Object(r.jsx)("h2",{children:s}),Object(r.jsx)("p",{children:null===(t=h[0])||void 0===t?void 0:t.message})]})]})})}c(83);function M(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],s=t[1],n=d(),i=Object(u.a)(n,1)[0].user;return Object(a.useEffect)((function(){var e=N.collection("rooms").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(r.jsxs)("div",{className:"sidebar",children:[Object(r.jsxs)("div",{className:"sidebar__header",children:[Object(r.jsx)(w.a,{src:null===i||void 0===i?void 0:i.photoURL}),Object(r.jsxs)("div",{className:"sidebar__headerRight",children:[Object(r.jsx)(y.a,{children:Object(r.jsx)(k.a,{})}),Object(r.jsx)(y.a,{children:Object(r.jsx)(A.a,{})}),Object(r.jsx)(y.a,{children:Object(r.jsx)(C.a,{})})]})]}),Object(r.jsx)("div",{className:"sidebar__search",children:Object(r.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(r.jsx)(I.a,{}),Object(r.jsx)("input",{type:"text",placeholder:"Search chat"})]})}),Object(r.jsxs)("div",{className:"sidebar__chats",children:[Object(r.jsx)(D,{addNewChat:!0}),c.map((function(e){return Object(r.jsx)(D,{id:e.id,name:e.data.name},e.id)}))]})]})}var B=c(109),T=c(59),P=c.n(T),U=c(60),W=c.n(U),F=c(61);c(88);function G(){var e,t,c=Object(a.useState)(""),s=Object(u.a)(c,2),n=s[0],i=s[1],o=Object(a.useState)(""),j=Object(u.a)(o,2),l=j[0],b=j[1],h=Object(a.useState)(""),O=Object(u.a)(h,2),p=O[0],x=O[1],f=Object(a.useState)([]),v=Object(u.a)(f,2),_=v[0],g=v[1],S=Object(m.f)().roomId,E=d(),k=Object(u.a)(E,1)[0].user;Object(a.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[S]),Object(a.useEffect)((function(){S&&(N.collection("rooms").doc(S).onSnapshot((function(e){return x(e.data().name)})),N.collection("rooms").doc(S).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){g(e.docs.map((function(e){return e.data()})))})))}),[S]);return Object(r.jsxs)("div",{className:"chat",children:[Object(r.jsxs)("div",{className:"chat__header",children:[Object(r.jsx)(w.a,{src:"https://avatars.dicebear.com/api/identicon/".concat(n,".svg")}),Object(r.jsxs)("div",{className:"chat__headerInfo",children:[Object(r.jsx)("h3",{children:p}),Object(r.jsxs)("p",{children:["Last seen"," ",new Date(null===(e=_[_.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(r.jsxs)("div",{className:"chat__headerRight",children:[Object(r.jsx)(y.a,{children:Object(r.jsx)(I.a,{})}),Object(r.jsx)(y.a,{children:Object(r.jsx)(B.a,{})}),Object(r.jsx)(y.a,{children:Object(r.jsx)(C.a,{})})]})]}),Object(r.jsx)("div",{className:"chat__body",children:_.map((function(e){var t;return Object(r.jsxs)("p",{className:"chat__message ".concat(e.name===k.displayName&&"chat__reciever"),children:[Object(r.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(r.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]},e.id)}))}),Object(r.jsxs)("div",{className:"chat__footer",children:[Object(r.jsx)(P.a,{}),Object(r.jsxs)("form",{children:[Object(r.jsx)("input",{type:"text",placeholder:"Type a message",value:l,onChange:function(e){return b(e.target.value)}}),Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),console.log("You typed",l),N.collection("rooms").doc(S).collection("messages").add({message:l,name:k.displayName,timestamp:F.a.firestore.FieldValue.serverTimestamp()}),b("")},type:"Submit",children:"Send"})]}),Object(r.jsx)(W.a,{})]})]})}c(89);var K=function(){var e=d(),t=Object(u.a)(e,1)[0].user;return Object(r.jsx)("div",{className:"app",children:t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"app__header"}),Object(r.jsx)("div",{className:"app__body",children:Object(r.jsxs)(O.a,{children:[Object(r.jsx)(M,{}),Object(r.jsxs)(m.c,{children:[Object(r.jsx)(m.a,{exact:!0,path:"/rooms/:roomId",children:Object(r.jsx)(G,{})}),Object(r.jsx)(m.a,{exact:!0,path:"/",children:Object(r.jsx)(G,{})})]})]})})]}):Object(r.jsx)(S,{})})};c(90);i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(j,{initialState:{user:null},reducer:h,children:Object(r.jsx)(K,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.5aa7774c.chunk.js.map